#### 1.**显示商品列表**

- **需求**：
  - 显示商品的名称、价格、库存等信息。
  - 商品可以按分类过滤。
  - 使用 `Axios` 从后端 API 获取数据。
- **检查**：
  - **商品显示**：确保前端能够通过接口正确加载商品数据，并能正确显示每个商品的基本信息。
  - **分类功能**：如果分类是预先定义的（不可修改），建议前端固定分类选项，后端 API 提供商品分类的接口，通过选择分类过滤商品数据。
  - **分页/排序**：商品列表如果过长，建议实现分页或按价格、销量等排序功能，提升用户体验。

#### 2. **购物车功能**

- 需求

  ：

  - 使用 `Vuex` 管理购物车状态，存储商品 ID、名称、数量、价格等。
  - 用户能够增加商品、减少商品数量、删除商品。
  - 购物车数据应该在不同页面间共享。

- 检查

  ：

  - **数据结构设计**：`Vuex` 状态存储的购物车数据结构应该包括商品 ID、名称、数量、单价等字段。可以考虑使用 `Map` 或对象存储购物车数据，以便通过商品 ID 直接查找。

  - 购物车功能

    ：

    - 增加商品：用户点击加号按钮时，购物车中商品数量增加，若商品不存在则添加到购物车。
    - 减少商品：用户点击减号按钮时，购物车中商品数量减少，若数量为 0，则删除该商品。
    - 删除商品：点击删除按钮时，商品从购物车中移除。

  - **持久化购物车**：考虑到用户刷新页面后购物车的状态应该保存，可以使用 `localStorage` 或 `sessionStorage` 将购物车数据持久化。

#### 3. **订单管理**

- 需求

  ：

  - 用户查看已下订单，显示订单详情：商品、数量、总价、订单状态（未支付、已支付、配送中、已取消）。
  - 用户可以点击按钮提交新订单，调用后端 API 创建订单。
  - 支付功能使用积分，积分只能通过修改数据库实现。

- 检查

  ：

  - 订单查看

    ：

    - 订单应该能够按状态过滤（如已支付、未支付等），并显示每个订单的详细信息（商品、数量、订单状态等）。

  - 订单提交

    ：

    - 用户点击“提交订单”后，前端需要调用后端 API，创建订单并将购物车中的商品添加到订单中。
    - 订单创建成功后，返回的订单信息应包括订单 ID、总金额、订单状态等。

  - 支付功能

    ：

    - 支付功能可以与积分系统关联。支付时，积分通过后端的积分表进行扣除。
    - 需要实现一个积分查询和扣除的 API，确保支付后更新用户积分。

  - 订单状态管理

    ：

    - 定义四个订单状态（未支付、已支付、配送中、已取消）。订单状态更新应该是一个后台操作，前端在请求时展示最新的状态。

#### 4. **用户认证与管理**

- **需求**：

  - 使用自己的算法生成 `token`。
  - 用户可以注册和登录，登录后 `token` 存储在本地存储或 session 中。
  - 用户登录后，可以访问受保护的资源，如下单、查看个人订单等。

- **检查**：

  - 自定义 Token

    ：自定义算法生成 

    ```
    token
    ```

     可以使用 JWT 或自定义简单的加密算法（不建议自己实现加密算法，使用现有的库更为安全）。

    - JWT 认证方案通常更为标准化和安全，推荐使用。

  - 用户认证

    ：

    - 登录时，前端通过 POST 请求发送用户凭证（用户名和密码）到后端，后端验证后生成 `token`，返回给前端。
    - 前端将 `token` 存储在 `localStorage` 或 `sessionStorage` 中，并在后续请求时在请求头部携带 `Authorization` 字段。
    - 通过 `token` 验证用户身份，保护需要登录的 API 资源。

  - 用户注册与登录

    ：

    - 确保前端和后端都实现注册和登录功能，包括数据验证和错误处理（如用户名重复、密码错误等）。

#### 5. **积分支付功能**

- **需求**：
  - 用户支付订单时使用积分。
  - 积分通过修改数据库实现。
- **检查**：
  - **积分查询**：需要有一个 API 来查询用户的积分余额。
  - **积分支付**：支付时，前端应该发送请求确认用户的积分余额是否足够，若足够，则扣除相应的积分。
  - **积分更新**：后端通过数据库更新用户积分（扣除已支付的积分）。

------

### **需求分析：**

#### 1. **功能设计**

- 用户可以查看商品列表、按分类筛选商品。
- 用户可以添加商品到购物车、修改数量、删除商品。
- 用户可以查看、提交订单，查看订单详情，支付时使用积分。
- 用户登录后可以访问个人信息、查看已下的订单、提交新订单。

#### 2. **技术栈**

- **前端**：Vue2、Vuex、Vue Router、Axios、Vuetify/Bootstrap。
- **后端**：ASP.NET 8 Web API、JWT认证、EF Core、MySQL 8.0.29。
- **数据库**：用户表、商品表、购物车表、订单表、积分表。

#### 3. **用户认证与权限控制**

- 用户注册和登录后，生成 `token` 进行身份认证。
- 受保护资源（如创建订单、查看个人订单）需要验证用户身份。

#### 4. **数据库设计**

- 用户表：存储用户信息，密码经过加密。
- 商品表：存储商品的基本信息。
- 购物车表：记录用户购物车中的商品。
- 订单表：记录订单信息，订单状态管理。
- 积分表：记录用户积分，用于支付。

#### 5. **安全性与扩展性**

- **安全性**：密码加密存储（如 bcrypt），JWT 认证，数据传输加密（HTTPS）。
- **扩展性**：可以扩展如商品评价、推荐系统、支付集成等功能。